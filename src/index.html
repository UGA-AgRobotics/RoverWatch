<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Rover Watch</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- External CSS Resources -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!-- / External CSS Resources -->

  <script
  	src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <!-- External JS Resources -->
	<script
	  src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
	  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
	  crossorigin="anonymous"></script>
	<script
	  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
	  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
	  crossorigin="anonymous"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<!-- / External JS Resources -->


  <script>

	var map;
	var markerCount = 0;

	function initialize() {
	  // set up the map
	  map = new google.maps.Map(document.getElementById('map-canvas'), {
	    // center: new google.maps.LatLng(0, 0),
	    center: new google.maps.LatLng(31.473600, -83.529900),
	    zoom: 18,
	    mapTypeId: "satellite"
	  });
	}

	google.maps.event.addDomListener(window, 'load', initialize);

	//This function will add a marker to the map each time it 
	//is called.  It takes latitude, longitude, and html markup
	//for the content you want to appear in the info window 
	//for the marker.
	function addMarkerToMap(lat, lon, htmlMarkupForInfoWindow){
	    var infowindow = new google.maps.InfoWindow();
	    var myLatLng = new google.maps.LatLng(lat, lon);

	    // From RRA google_map_dragdrop_geojson.html..
	    var marker = new google.maps.Circle({
	      strokeColor: 'red',
	      fillColor: 'red',
	      map: map,
	      center: myLatLng,
	      radius: 0.1,
	      animation: google.maps.Animation.DROP  // doesn't seem to work w/ Circle marker
	    });
	    
	    //Gives each marker an Id for the on click
	    markerCount++;

	    //Creates the event listener for clicking the marker
	    //and places the marker on the map 
	    google.maps.event.addListener(marker, 'click', (function(marker, markerCount) {
	        return function() {
	            infowindow.setContent(htmlMarkupForInfoWindow);
	            infowindow.open(map, marker);
	        }
	    })(marker, markerCount));  
	    
	    //Pans map to the new location of the marker
	    map.panTo(myLatLng);        
	}

	// $(window).on("load", addMarkerToMap(31.473600, -83.529900));
	$(document).ready(function () {

	  $('#btn-plot').on('click', function () {

	    let lat = parseFloat($('#latitude').val());
	    let lon = parseFloat($('#longitude').val());

	    addMarkerToMap(lat, lon);

	  });

	});

  </script>

</head>
<body>
  
  <app-root></app-root>

</body>
</html>
